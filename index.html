<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Wireframe Globe Minimaliste</title>
  <style>
    html, body { height: 100%; margin: 0; }
    body { background: #fff; }
    #globeViz { width: 100vw; height: 100vh; }
  </style>
  <script src="https://unpkg.com/three@0.150.0/build/three.min.js"></script>
  <script src="https://unpkg.com/globe.gl@2.26.0/dist/globe.gl.min.js"></script>
</head>
<body>
  <div id="globeViz"></div>
  <script>
    const el = document.getElementById('globeViz');
    const globe = Globe()(el);

    // Globe vide de texture, uniquement wireframe
    globe.globeImageUrl(null);
    globe.bumpImageUrl(null);

    globe.globeMaterial(new THREE.MeshBasicMaterial({
      color: 0x222222,
      wireframe: true
    }));

    // Fond blanc
    globe.scene().background = new THREE.Color(0xffffff);
    globe.renderer().setClearColor(0xffffff, 1);

    // Lumière minimale (facultative pour MeshBasicMaterial)
    globe.scene().add(new THREE.AmbientLight(0xffffff, 0.6));

    // Épingles
    const pins = [
      { lat: 48.8566, lng: 2.3522, name: 'Paris' },
      { lat: 52.52,   lng: 13.405, name: 'Berlin' },
      { lat: 40.7128, lng: -74.0060, name: 'New York' }
    ];

    globe
      .customLayerData(pins)
      .customThreeObject(d => {
        const r = 0.0075;
        const h = 0.35;
        const mat = new THREE.MeshStandardMaterial({ color: 0x000000, transparent: true, opacity: 0.8 });
        return new THREE.Mesh(new THREE.CylinderGeometry(r, r, h, 8), mat);
      })
      .customThreeObjectUpdate((obj, d) => {
        const { lat, lng } = d;
        const phi = (90 - lat) * Math.PI / 180;
        const theta = (lng + 180) * Math.PI / 180;
        const R = globe.getGlobeRadius();

        const x = R * Math.sin(phi) * Math.cos(theta);
        const y = R * Math.cos(phi);
        const z = R * Math.sin(phi) * Math.sin(theta);
        obj.position.set(x, y, z);

        const normal = obj.position.clone().normalize();
        obj.quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), normal);
        obj.position.multiplyScalar(1.02);
      });

    globe.controls().autoRotate = true;
    globe.controls().autoRotateSpeed = 0.6;
    globe.pointLabel(() => null);
  </script>
</body>
</html>
